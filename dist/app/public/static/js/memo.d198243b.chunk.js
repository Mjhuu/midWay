(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[12],{294:function(e,t,n){"use strict";function o(e){var t=e.prototype.componentWillUnmount;e.prototype.componentWillUnmount=function(){t&&t.call.apply(t,[this].concat(Array.prototype.slice.call(arguments))),this.unmount=!0};var n=e.prototype.setState;e.prototype.setState=function(){this.unmount||n.call.apply(n,[this].concat(Array.prototype.slice.call(arguments)))}}n.d(t,"a",(function(){return o}))},317:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"d",(function(){return i})),n.d(t,"g",(function(){return s})),n.d(t,"f",(function(){return c})),n.d(t,"e",(function(){return l}));n(24);function o(e){return/^[0-9A-Za-z][\.-_0-9A-Za-z]*@[0-9A-Za-z]+(\.[0-9A-Za-z]+)+$/.test(e)}function a(e){var t=e.replace(/^\s*|\s*$/g,""),n=t.length,o=0;return/[\d]/.test(t)&&o++,/[a-zA-Z]/.test(t)&&o++,/[^\w]/.test(t)&&o++,n>=6&&n<=16&&!/\s/.test(t)&&o>=2}function r(e){return/^([\u4E00-\uFA29]|[\uE7C7-\uE7F3]|[a-zA-Z0-9_])+$/.test(e)}function i(e){return/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])[0-9]{8}$/.test(e)}function s(e){e&&e.preventDefault?e.preventDefault():window.event.returnValue=!1}function c(e){return"string"===typeof e&&(e=e.replace(/<img(.*?)>/g,"[\u56fe\u7247]")),e}function l(e){var t=document.createElement("div");t.innerHTML=e;var n=t.innerText||t.textContent;return t=null,n}},589:function(e,t,n){var o=n(590);"string"===typeof o&&(o=[[e.i,o,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(94)(o,a);o.locals&&(e.exports=o.locals)},590:function(e,t,n){(t=n(93)(!1)).push([e.i,"#memo_box {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  border-radius: 1rem;\n  overflow: hidden;\n  background-color: #fbf7f1;\n}\n#memo_box >section {\n  height: 100%;\n}\n#memo_box >section.left {\n  flex: 4;\n  max-width: 35rem;\n  min-width: 35rem;\n  position: relative;\n  overflow: auto;\n  border-right: 0.1rem solid #b9b9b9;\n}\n#memo_box >section.left >.add-memo {\n  position: absolute;\n  right: 2rem;\n  top: 3rem;\n  width: 3rem;\n  height: 3rem;\n  cursor: pointer;\n}\n#memo_box >section.left >.add-memo >svg {\n  width: 100%;\n  height: 100%;\n}\n#memo_box >section.left >.top {\n  font-size: 2.6rem;\n  color: #000;\n  font-weight: bold;\n  display: flex;\n  align-items: center;\n  height: 10rem;\n  padding: 3rem 2rem;\n  border-bottom: 0.1rem solid #b9b9b9;\n}\n#memo_box >section.left >.top p {\n  margin-bottom: 0;\n}\n#memo_box >section.left >.memo-list {\n  position: absolute;\n  top: 10rem;\n  left: 0;\n  width: 100%;\n  height: calc(100% - 10rem);\n  overflow: auto;\n}\n#memo_box >section.left >.memo-list >ul {\n  width: 100%;\n  margin-bottom: 0;\n}\n#memo_box >section.left >.memo-list >ul >li {\n  width: 100%;\n  border-top: 0.1rem solid #b9b9b9;\n  padding: 1.5rem 2rem;\n  transition: all 0.3s;\n  cursor: pointer;\n}\n#memo_box >section.left >.memo-list >ul >li >.title {\n  width: 100%;\n  font-size: 1.6rem;\n  font-weight: bold;\n  color: #302a2a;\n}\n#memo_box >section.left >.memo-list >ul >li:hover {\n  background-color: rgba(244,224,189,0.569);\n}\n#memo_box >section.left >.memo-list >ul >li.select {\n  border-top: 0.5rem solid #b9b9b9;\n  background-color: #f4e0bd;\n}\n#memo_box >section.right {\n  flex: 6;\n  position: relative;\n  overflow: auto;\n  padding: 2rem;\n}\n#memo_box >section.right >.no-search {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 1.6rem;\n}\n#memo_box >section.right >.top {\n  height: 6rem;\n  display: flex;\n  align-items: center;\n}\n#memo_box >section.right >.top >span {\n  margin-left: 1rem;\n}\n#memo_box >section.right >.edit {\n  position: absolute;\n  top: 9rem;\n  left: 0;\n  width: 100%;\n  height: calc(100% - 10rem);\n}\n",""]),e.exports=t},984:function(e,t,n){"use strict";n.r(t);var o,a=n(9),r=n.n(a),i=n(26),s=n(38),c=n(39),l=n(40),m=n(41),u=n(0),d=n.n(u),p=(n(589),n(294)),f=n(285),h=n(284),g=n(50),b=n(53),v=(n(473),n(684)),w=n.n(v),x=(n(686),n(7)),y=n.n(x),E=n(25),M=n(11),k=n(317),j=f.a.confirm,_=Object(p.a)(o=function(e){Object(m.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(s.a)(this,n);for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={editorState:w.a.createEditorState(null),selectMemo:{},selectKey:0,memoList:[],timer:null,saveLoading:!1},e.updateMemo=Object(i.a)(r.a.mark((function t(){var n,o,a,i,s,c,l;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,o=n.selectMemo,a=n.editorState,i=n.selectKey,s=a.toHTML(),e.setState({saveLoading:!0}),t.next=5,Object(E.S)({memoId:o.memo_id,content:s});case 5:return c=t.sent,t.next=8,e.setState({saveLoading:!1});case 8:0===c.status?(console.log(c),(l=e.state.memoList)[i].dealContent=Object(k.e)(Object(k.f)(s)),l[i].content=s,e.setState({memoList:l})):h.a.warning("\u4fdd\u5b58\u5931\u8d25");case 9:case"end":return t.stop()}}),t)}))),e.delMemo=Object(i.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.state.selectMemo,j({title:"\u5220\u9664\u5907\u5fd8\u5f55?",content:"\u786e\u8ba4\u5220\u9664\u6b64\u5907\u5fd8\u5f55\u5417\uff1f",onOk:function(){var t=Object(i.a)(r.a.mark((function t(){var o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(E.o)({memoId:n.memo_id});case 2:0===(o=t.sent).status?(h.a.success(o.msg),e.getUserMemos()):h.a.warning(o.msg);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()});case 2:case"end":return t.stop()}}),t)}))),e.uploadFile=function(){var e=Object(i.a)(r.a.mark((function e(t){var n,o,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new FormData,o=M.a.getCache("userId"),n.append("file",t.file),n.append("userId",o),e.next=6,Object(E.Z)(n,o);case 6:0===(a=e.sent).status?(a.result.url=E.a+a.result.url,t.success(a.result)):t.error({msg:"\u4e0a\u4f20\u9519\u8bef"});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.handleEditorChange=function(t){var n=e.state,o=n.timer;n.selectMemo;clearTimeout(o);o=setTimeout((function(){!0&&e.updateMemo()}),500),e.setState({timer:o,editorState:t})},e}return Object(c.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.editorState,o=t.memoList,a=(t.selectMemo,t.selectKey),r=t.saveLoading,i={uploadFn:this.uploadFile,accepts:{image:"image/png,image/jpeg,image/gif,image/webp,image/apng,image/svg",video:!1,audio:!1},externals:{image:"image/png,image/jpeg,image/gif,image/webp,image/apng,image/svg",video:!1,audio:!1,embed:!1}};return d.a.createElement("div",{id:"memo_box"},d.a.createElement("section",{className:"left"},d.a.createElement("div",{onClick:function(){return e.addMemo()},className:"add-memo"},d.a.createElement("svg",{t:"1594705845739",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3496",width:"200",height:"200"},d.a.createElement("path",{d:"M711.37095 895.842322c0 4.264482-3.470971 7.735454-7.707808 7.735453H126.83789c-4.264482 0-7.735454-3.470971-7.735453-7.735453V128.775081c0-4.264482 3.470971-7.735454 7.735453-7.735453h576.824228c4.236837 0 7.707809 3.470971 7.707809 7.735453v125.216056h55.979906V128.775081c0-35.137697-28.563329-63.71536-63.687715-63.71536H126.83789c-35.123362 0-63.71536 28.577663-63.71536 63.71536v767.067241c0 35.137697 28.590974 63.71536 63.71536 63.71536h576.824228c35.124386 0 63.687715-28.577663 63.687715-63.71536V779.509495h-55.979906v116.332827z",fill:"#e0620d","p-id":"3497"}),d.a.createElement("path",{d:"M956.417425 388.157998c-10.14056-74.088342-78.8576-128.263139-155.228182-117.890156-6.970611 0.956309-13.366823 4.510215-17.821748 9.963428L499.370375 626.016798a27.85992 27.85992 0 0 0-5.630346 11.343626l-43.706593 185.349864c-2.432752 10.305406 1.17542 21.102277 9.293807 27.893708a27.987905 27.987905 0 0 0 17.957925 6.519078c3.771994 0 7.571632-0.764842 11.152159-2.323196l175.564593-76.288671a28.037052 28.037052 0 0 0 11.097893-8.665142l275.824467-360.901147c4.509191-5.917033 6.477099-13.406754 5.493145-20.78692zM541.188923 680.08511c35.105956-2.642648 66.944694 22.702609 71.808149 58.163854 0.060409 0.439247 0.132081 0.875422 0.211945 1.307502l-95.853073 41.647559 23.832979-101.118915z m118.215752 18.095126c-15.971587-36.76977-49.022605-63.537204-87.991681-71.686307l175.824659-214.075992c38.949622-1.921833 73.99824 23.944582 83.526517 61.546771L659.404675 698.180236zM869.629833 423.108324c-18.010143-29.957861-46.902139-52.108596-80.530628-61.660422l29.966052-36.48513c37.256115-0.58771 69.920105 24.873246 79.677732 60.051898l-29.113156 38.093654z",fill:"#e0620d","p-id":"3498"}))),d.a.createElement("div",{className:"top"},d.a.createElement("p",null,"\u6240\u6709\u5907\u5fd8\u5f55")),d.a.createElement("section",{className:"memo-list"},d.a.createElement("ul",null,o.map((function(t,n){return d.a.createElement("li",{key:t.memo_id,className:a===n?"select":"",onClick:function(){return e.showMemo(t,n)}},d.a.createElement("div",{className:"title ellipsis"},t.dealContent||"\u65b0\u5efa\u5907\u5fd8\u5f55"),d.a.createElement("div",{className:"time"},y()(t.createdAt).format("YYYY/MM/DD HH:mm:ss")))}))),0===o.length&&d.a.createElement(g.a,{style:{color:"21242a",marginTop:"20rem"},description:"\u8fd8\u6ca1\u6709\u5907\u5fd8\u5f55"}))),d.a.createElement("section",{className:"right"},0===o.length&&d.a.createElement("div",{className:"no-search"},"\u4f60\u8fd8\u6ca1\u6709\u5907\u5fd8\u5f55\u54e6"),o.length>0&&d.a.createElement("div",{className:"top"},d.a.createElement(b.a,{onClick:function(){return e.delMemo()},type:"primary",danger:!0},"\u5220\u9664"),d.a.createElement(b.a,{onClick:function(){return e.updateMemo()},style:{marginLeft:"1rem"},type:"primary",loading:r},r?"\u4fdd\u5b58\u4e2d":"\u4fdd\u5b58"),d.a.createElement("span",null,"\u8f93\u5165",this.contentLength,"\u5b57")),o.length>0&&d.a.createElement("div",{className:"edit"},d.a.createElement(w.a,{value:n,controls:["undo","redo","separator","font-size","line-height","letter-spacing","separator","text-color","bold","italic","underline","strike-through","separator","superscript","subscript","remove-styles","emoji","separator","text-indent","text-align","separator","headings","list-ul","list-ol","blockquote","code","separator","link","separator","hr","separator","media","separator","clear"],media:i,onChange:this.handleEditorChange,onSave:this.updateMemo}))))}},{key:"componentDidMount",value:function(){this.getUserMemos()}},{key:"showMemo",value:function(e,t){this.setState({selectMemo:e,selectKey:t,editorState:w.a.createEditorState(e.content)})}},{key:"getUserMemos",value:function(){var e=Object(i.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.F)({userId:M.a.getCache("userId")});case 2:0===(t=e.sent).status?((n=t.result.memoList).forEach((function(e){e.dealContent=Object(k.e)(Object(k.f)(e.content))})),this.setState({memoList:n,selectMemo:n.length>0?n[0]:{},selectKey:0,editorState:w.a.createEditorState(n.length>0?n[0].content:null)})):h.a.warning("\u5907\u5fd8\u5f55\u83b7\u53d6\u5931\u8d25");case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addMemo",value:function(){var e=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.f)({userId:M.a.getCache("userId")});case 2:0===(t=e.sent).status?(console.log(t),this.getUserMemos()):h.a.warning("\u5907\u5fd8\u5f55\u65b0\u589e\u5931\u8d25");case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"contentLength",get:function(){var e=this.state.editorState;return(e?e.toText():"").length}}]),n}(u.Component))||o;t.default=_}}]);